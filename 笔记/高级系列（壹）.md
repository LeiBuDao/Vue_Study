# Vue组件定义与使用 - 非单文件组件 - 单文件组件 - VueComponent



## 零、组件的概念

### 0.1、传统方式编写应用

> 1. 依赖关系混乱，不好维护
> 2. 代码复用率不高

![传统方式编写应用](./image/2-1/01.png)

### 0.2、 使用组件方式编写应用

![使用组件方式编写应用](./image/2-1/02.png)

### 0.3、 组件的定义

> 实现应用中局部功能代码和资源的集合

![组件的定义](./image/2-1/03.png)



## 一、非单文件组件

### 1.1、使用组件的三大步骤

> 1. 定义组件（创建组件）
>2. 注册组件
> 3. 使用组件（写组件标签）



### 1.2、如何定义一个组件

> 使用`Vue.extend(options)`创建，其中options和new Vue（options)时传入的那个options几乎一样，但有以下区别：
>
> - 不要写el——最终所有的组件都要经过一个vm的管理，由vm中的el决定服务哪个容器
> - data必须写成函数——避免组件被复用时，数据存在引用关系
>
> **【备注】**使用tempalte可以配置组件结构



### 1.3、如何注册组件

> 1. 局部注册：`new Vue`的时候传入`components`选项
> 2. 全局注册：`Vue.component`(‘组件名’, 组件)

### 1.4、注意点

### 1.5、组件嵌套



## 二、VueComponent

> 1. 想让Vue工作，就必须创建一个Vue实例，且要传入一个配置对象；
> 2. root容器里的代码依然符合html规范，只不过混入了一些特殊的Vue语法；
> 3. root容器里的代码被称为【Vue模板】；
> 4. Vue实例和容器是一一对应的；
> 5. 真实开发中只有一个Vue实例，并且会配合着组件一起使用；
> 6. {{xxx}}中的xxx要写js表达式，且xxx可以自动读取到data中的所有属性；
> 7. 一旦data中的数据发生改变，那么页面中用到该数据的地方也会自动更新；

```js
//创建Vue实例
new Vue({
	el:'#root', //el用于指定当前Vue实例为哪个容器服务，值通常为css选择器字符串。
	data:{ //data中用于存储数据，数据供el所指定的容器去使用，值我们暂时先写成一个对象。
		name:'许润',
		address:'南京'
	}
})
```

### 2.1、Vue模板语法

> *Vue模板语法有2大类：*
>
> **1.插值语法：**
>
> *功能*：用于解析标签体内容。
>
> *写法*：{{xxx}}，xxx是js表达式，且可以直接读取到data中的所有属性。
>
> **2.指令语法：**
>
> *功能*：用于解析标签（包括：标签属性、标签体内容、绑定事件.....）。
>
> *举例*：v-bind:href="xxx" 或  简写为 :href="xxx"，xxx同样要写js表达式，
>
> 且可以直接读取到data中的所有属性。
>
> *备注*：Vue中有很多的指令，且形式都是：v-????，此处我们只是拿v-bind举个例子。

### 2.2、数据绑定

> *Vue中有2种数据绑定的方式：*
>
>  **1.单向绑定(v-bind)**：数据只能从data流向页面。
>
>  **2.双向绑定(v-model)**：数据不仅能从data流向页面，还可以从页面流向data。
>
>   备注：
>
> 1.双向绑定一般都应用在表单类元素上（如：input、select等）
>
>  2.v-model:value 可以简写为 v-model，因为v-model默认收集的就是value值。

```js
<!-- 普通写法 -->
单向数据绑定：<input type="text" v-bind:value="name"><br/>
双向数据绑定：<input type="text" v-model:value="name"><br/> 

<!-- 简写 -->
单向数据绑定：<input type="text" :value="name"><br/>
双向数据绑定：<input type="text" v-model="name"><br/>
```

> 如下代码是错误的，因为v-model只能应用在表单类元素（输入类元素）上 
>
> ```js
> <h2 v-model:x="name">你好啊</h2>
> ```



### 2.3、关于el和data的两种写法

#### Ⅰ、el的2种写法

（1）new Vue时候配置el属性。

```js
const v = new Vue({
	el:'#root', //第一种写法
	data:{
		name:'许润'
	}
})
```

(2) 先创建Vue实例，随后再通过vm.$mount(’#root’)指定el的值。

```js
const v = new Vue({
	data:{
		name:'许润'
	}
})
v.$mount('#root') //第二种写法 */
```

#### Ⅱ、data的2种写法

(1) 对象式

```js
data:{
	name:'许润'
} 
```

(2) 函数式

```js
data(){
	console.log('@@@',this) //此处的this是Vue实例对象
	return{
		name:'许润'
	}
}
```

#### Ⅲ、如何选择el与data的写法

> 如何选择：目前哪种写法都可以，以后学习到组件时，data必须使用函数式，否则会报错。



 **一个重要的原则：**由Vue管理的函数，一定不要写箭头函数，一旦写了箭头函数，this就不再是Vue实例了。



## 三、单文件组件 vue 文件的组成(3 个部分)

![MVVMl](image/01/MVVM.png)

> **M**:模型(Model) ：对应data中的数据
>
> **V**:视图(View) ：模板代码（不是静态页面） （两个语法：指令，大括号表达式）
>
> **VM**:viewModel: 视图模型（Vue的实例对象）
>
> - Dom Listeners （Dom 监听）
> - Data Bindings （数据绑定）



### MVVM

> MVVM 本质上是 MVC （Model-View- Controller）的改进版。即模型-视图-视图模型。
>
> `模型`model指的是后端传递的数据，`视图`view指的是所看到的页面。
>
> `视图模型`viewModel是 mvvm 模式的核心，它是连接 view 和 model 的桥梁。它有两个方向：
>
> 1. 将模型转化成视图，即将后端传递的数据转化成所看到的页面。实现的方式是：**数据绑定**
>
> 2. 将视图转化成模型，即将所看到的页面转化成后端的数据。实现的方式是：**DOM 事件监听**
>
> 这两个方向都实现的，我们称之为**数据的双向绑定**。



### 结论：

1.data中所有的属性，最后都出现在了vm身上。

2.vm身上所有的属性 及 Vue原型上所有属性，在Vue模板中都可以直接使用。